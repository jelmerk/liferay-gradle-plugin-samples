buildscript {
    repositories {
		mavenLocal()
		mavenCentral()
    }
    dependencies {
        classpath group: 'com.github.jelmerk', name: 'liferay-plugin', version: '0.1.0-SNAPSHOT'
    }
}

subprojects {
    apply plugin: 'idea'
    apply plugin: 'eclipse'
    apply plugin: 'liferay-portlet'
    apply plugin: 'liferay-servicebuilder'

    liferay {
        appServerDirName = liferayHome
    }
	
    servicebuilder {
        jalopyInputFileName = jalopyFile
    }
        
    [javadoc, javadocService].each { task ->
	    task.options.tags = ['generated:a:"ServiceBuilder generated this class. Modifications in this class will be overwritten the next time it is generated"']
    }
	
    // unlike the eclipse plugin the intellij plugin does not seem to add all source dirs
	
    idea {
        module {
            sourceDirs += sourceSets.service.allJava.srcDirs
        }
    }	
	
    dependencies {
        compile sourceSets.service.output
	
        providedCompile 'javax.servlet:servlet-api:2.5'
        providedCompile 'javax.servlet.jsp:jsp-api:2.1'
		
		providedCompile fileTree(dir :"$liferay.appServerGlobalLibDir", include: "*.jar")
        
        providedCompile files(
        	"$liferay.appServerPortalDir/WEB-INF/lib/util-java.jar",
			"$liferay.appServerPortalDir/WEB-INF/lib/util-bridges.jar",
	  	    "$liferay.appServerPortalDir/WEB-INF/lib/util-taglib.jar"
	  	)
		
        // servicebuilder dependencies
		
        serviceCompile files("$liferay.appServerGlobalLibDir/portal-service.jar")		
    }
}